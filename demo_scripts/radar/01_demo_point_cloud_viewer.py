"""
SPDX-FileCopyrightText: Copyright (c) 2025 SEW-EURODRIVE, Author: Leon Rafael Sch√∂nfeld
SPDX-License-Identifier: MIT
"""

"""
Demo: Radar Point Cloud Viewer

This script demonstrates how to load, filter, and visualize radar point cloud data using the RadarSensor class.
It is intended for use with point cloud CSV files generated by on-chip processing on the Texas Instruments AWR1843AOP radar chip.
You can use this script to quickly view and explore the processed radar point cloud data, colored by intensity or doppler velocity.
"""

from radar_sensor import RadarSensor

if __name__ == "__main__":
    radar = RadarSensor()
    # Path to your radar point cloud CSV file
    radar_csv_path = "/path/to/your/pointcloud.csv"  # TODO: update path
    pc = radar.load_pointcloud(radar_csv_path)

    # Filter configuration
    ranges = {
        'x': (0, 10),   # in meters
        'y': (-5, 5),   # in meters
        'z': (-5, 5),   # in meters
        'intensity': (0.0, 50.0),  # in dB
        'doppler': (-5, 5)  # in m/s
    }
    pc_filtered = radar.filter_pointcloud(pc, ranges)
    print(f"Loaded {pc.shape[0]} points, filtered to {pc_filtered.shape[0]} points")

    # Visualize the filtered point cloud, colored by intensity
    radar.plot_pointcloud_3d(pc_filtered, color_by='intensity', cmap='plasma')

    # Visualize the filtered point cloud, colored by doppler
    radar.plot_pointcloud_3d(pc_filtered, color_by='doppler', cmap='coolwarm')